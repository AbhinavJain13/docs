---

copyright:
  years: 2015,2016

---

{:new_window: target="\_blank"}
{:shortdesc: .shortdesc}
{:screen:.screen}
{:codeblock:.codeblock}
{:pre: .pre}

# 設定憑證
{: #set_up_certificates.md}
前次更新：2016 年 11 月 15 日
{: .last-updated}

透過「風險與安全管理」附加程式，可將憑證用於裝置鑑別，或用來取代預設 IBM Watson IoT Platform 伺服器憑證，以進行 MQTT 傳訊。沒有有效簽章憑證的任何裝置，都會被拒絕存取，且無法與伺服器通訊。

為了配置裝置的憑證和伺服器存取權，系統操作員會在 Watson IoT Platform 中登錄相關聯的憑證管理中心 (CA) 憑證，並選擇性地登錄訊息伺服器憑證。

## 憑證需求

您登錄的憑證必須輸入裝置 ID 作為憑證中的「通用名稱 (CN)」或 SubjectAltName。*CN* 欄位的格式為 CN=d:devtype:devid。SubjectAltName 欄位的格式為：SubjectAltName=d:devtype:devid，其中 devtype 是裝置的「裝置類型」，而 devid 是裝置的「用戶端 ID」。

測試版不支援使用憑證撤銷清冊 (CRL) 來指示已不再允許哪些裝置連接。

如果您新增 CA 憑證，或取代傳訊伺服器憑證，則所有裝置都必須使用支援「伺服器名稱指示 (SNI)」的 MQTT 用戶端來連接。SNI 會透過多方承租戶架構，告訴 MQTT 伺服器應將哪些憑證用於各個組織/承租戶連線。

##登錄憑證管理中心 (CA) 憑證來進行裝置鑑別

1. 登入 Watson IoT Platform，並導覽至**一般設定**。
2. 在**風險管理**區段中的 **CA 憑證**下，按一下**新增憑證**。
3. 瀏覽並選取要上傳的憑證檔案，或將檔案拖放在**新增憑證**視窗中。該檔案中只能有一個憑證，且憑證日期必須有效。可接受副檔名為 .pem、.cer、.cert 或 .crt 的檔案。您可以預覽所選取檔案中的憑證資訊。
4. 輸入憑證檔案的說明。
5. 確認已選取正確的檔案，然後按一下**儲存**。所選取的憑證會列在表格中，且預設為作用中。

## 登錄傳訊伺服器憑證

平台附有預設伺服器憑證。您可以使用其中一個預設憑證，或是從您的組織上傳憑證。如果您還沒有憑證可使用，則可以建立要求來取得新憑證。接收新憑證之後，您必須加以簽署，然後上傳回平台。

若要使用其中一個預設憑證，或是已上傳的另一個憑證，請從**傳訊伺服器憑證**下之表格中的**預設傳訊伺服器憑證**下拉清單，選取您要使用的憑證。

### <a name="upload"></a>從您的組織上傳憑證

1. 在**一般設定**的**風險管理**區段中，按一下**傳訊伺服器憑證**下的**新增憑證**。
2. 瀏覽並選取要上傳的憑證檔案，或將檔案拖放在**新增憑證**視窗中。
3. 瀏覽並選取要上傳的私密金鑰檔案，或將檔案拖放在**新增憑證**視窗中。  
4. 輸入私密金鑰的通行詞組（如果私密金鑰有使用通行詞組來加密）。
5. 確認已選取正確的檔案，然後按一下**儲存**。
6. 從**預設傳訊伺服器憑證**下拉清單中，選取新上傳的憑證。所選取的憑證會在表格中列為作用中的憑證。


### 要求新憑證

 如果您想要使用新的傳訊伺服器憑證，則可以產生憑證簽署要求 (CSR) 來要求新憑證。

 1. 在**一般設定**的**風險管理**區段中，按一下**傳訊伺服器憑證**下的**產生 CSR**。
 2. 輸入詳細資料來為您的伺服器要求憑證簽署要求 (CSR)，然後按一下**產生**。CSR 即顯示在表格中。
 3. 下載要求，並將其提交至憑證管理中心進行簽署。
 4. 取得憑證之後，您可以依照「從您的組織上傳憑證」中的步驟將其上傳。上傳憑證之後，表格中的 CSR 就會被上傳的憑證所取代。
