---

copyright:
  years: 2015, 2016

---

{:new_window: target="\_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}


# Connecting gateways
{: #IoT_connectGateway}
*Last updated: 18 July 2016*

Before you can begin receiving data from devices that are connected to your gateways, you must connect the gateway to  {{site.data.keyword.iot_full}}. Connecting a gateway to {{site.data.keyword.iot_short_notm}} involves creating a gateway device type and registering the gateway with {{site.data.keyword.iot_short_notm}}. You can then use the registration information to connect the gateway to {{site.data.keyword.iot_short_notm}}.
{:shortdesc}

Gateways are a specialized class of devices in {{site.data.keyword.iot_short_notm}}. Gateways serve as access points to the {{site.data.keyword.iot_short_notm}} for other devices.


## Before you begin
{: #Prerequisites}

Gateway devices have additional permissions when compared to regular devices and can perform the following  functions:
- Register new devices to Watson IoT Platform
- Send and receive its own sensor data like a directly connected device,
- Send and receive data on behalf of the devices connected to it
- Run a device management agent, so that it can be managed, also manage the devices connected to it.  
For gateway developer information, see [MQTT connectivity for gateways](mqtt.html).

<!-- You can also use gateways to perform edge analytics on the data that the gateway devices are sending. For more information, see [Edge analytics](../edge_analytics.html) and [Installing the edge analytics agent](#edge).-->

## Step 1: Registering your gateway with {{site.data.keyword.iot_short_notm}}  
{: #register_gateway}

Registering a gateway involves classifying the device as a gateway type, giving the gateway a name, and providing gateway information. Then you provide a connection token or accept a token that is generated by {{site.data.keyword.iot_short_notm}}.

**Tip:** You can add gateways one at a time from the {{site.data.keyword.iot_short_notm}} dashboard, or you can use the [{{site.data.keyword.iot_short_notm}} API](https://docs.internetofthings.ibmcloud.com/swagger/v0002.html#!/Bulk_Operations/post_bulk_devices_add) to add one or more gateways at a time.

To add a gateway from the {{site.data.keyword.iot_short_notm}} dashboard:

1. In the {{site.data.keyword.iot_short_notm}} dashboard, select **Devices**.
2. Click **Add Device**.
3. Select or create a device type for the device that you are adding.  
Each device that is connected to the {{site.data.keyword.iot_short_notm}} must be associated with a device type. Device types are groups of devices that share common characteristics.  
 1. Click **Create device type** then **Create gateway type**.
 2. Enter a name such as `my_gateway_type` and a description for the gateway type.
 3. Optional: Enter gateway type attributes and metadata.    
 **Tip:** You can add and edit attributes and metadata later.
 4. Click **Create** to add the new gateway type.
10. Click **Next** to begin the process of adding your gateway device with the selected gateway type.
11. Enter a device ID, such as `my_gateway_device`.  
The device ID is used to identify the gateway device in the {{site.data.keyword.iot_short_notm}} dashboard and is also a required parameter for connecting your gateway device to {{site.data.keyword.iot_short_notm}}.
12. Optional: Click **Additional fields** to add gateway device information, such as serial number, manufacturer, model, and so on.  
 **Tip:** You can add and edit this information later.
12. Optional: Enter device JSON metadata.  
 **Tip:** You can add and edit device metadata later.
13. Click **Next** to complete the addition of your gateway device.
14. Verify that the summary information is correct and then click **Add** to add the gateway device.  
**Tip:** You have the option to accept an automatically generated authentication token or to provide an authentication token yourself. If you choose to create your own token, make sure that it is between 8 and 36 characters long, contains a mix of lower and upper case letters, numbers, and hyphen, underscore, or period. The token must not contain repeated character sequences, dictionary words, user names, or other predefined sequences.
15. In the device information page, copy and save the following device information:  
 - Organization ID, such as `tubo8x`
 - Device Type, such as `my_gateway_type`
 - Device ID. **Tip:** For network connected devices, this could for example be the MAC address without any separating colons.
 - Authentication Method, such as `token`
 - Authentication Token, such as `PtBVriRqIg4uh)_-Kl`  
  **Tip:** You will need Organization ID, Authentication Token, Device Type, and Device ID to configure your device to connect to {{site.data.keyword.iot_short_notm}}.  

Congratulations, you registered your gateway device. Now you can configure your gateway device to connect to {{site.data.keyword.iot_short_notm}}

## Step 2: Connecting your gateway to {{site.data.keyword.iot_short_notm}}
{: #connect_gateway}

After you register a gateway with {{site.data.keyword.iot_short_notm}} use the registration information to connect the gateway to {{site.data.keyword.iot_short_notm}} and start receiving data from devices that are connected to the gateway.

For information about connecting your gateway to {{site.data.keyword.iot_short_notm}}, see [MQTT connectivity for gateways](mqtt.html).

**Tip:** There are a range of recipes available for connecting devices to {{site.data.keyword.iot_short_notm}}. For a list of recipes, see the
[Device connection recipes](https://developer.ibm.com/recipes/?post_type=tutorials&s=IoT) that are available on IBM.com.


## Step 3: Connecting devices through the gateway
{: #gateway_devices}

Devices that are connected to the gateway are automatically added {{site.data.keyword.iot_short_notm}} when the gateway publishes messages from the device. Both the device type and device itself are automatically created when the gateway publishes a message for a device type and device ID combination that does not already exist.

For information about device auto registration and publishing and receiving data for connected devices, see [MQTT connectivity for gateways](mqtt.html).


When a device is successfully connected to your gateway, it displays on the dashboard of your {{site.data.keyword.iot_short_notm}} organization.

**Note:** In the {{site.data.keyword.iot_short_notm}} dashboard, devices and gateways that are connected directly to the {{site.data.keyword.iot_short_notm}} display a status icon to indicate that they are connected. The dashboard displays devices that are connected indirectly through a gateway as disconnected as it does not have any knowledge of a devices connectivity to the gateway.


<!-- ## Installing the edge analytics agent
{: #edge}

The Edge Analytics Agent (EAA) is a is a software component built on top of [Apache Quarks](http://quarks.incubator.apache.org/) to carry out edge analytics operations on a gateway by uploading and managing edge analytics rules from the {{site.data.keyword.iot_short_notm}} dashboard. For more information about edge analytics, see [Edge Analytics](../edge_analytics.html).

To install EAA on your gateway:
1. In the {{site.data.keyword.iot_short}} dashboard, go to **Rules**.
2. Click **Download Edge Agent** to go to the [IBM Edge Analytics Agent community](https://www.ibm.com/developerworks/community/groups/service/html/communitystart?communityUuid=3df173af-0c21-4b9c-9fd1-e8e5561ef460&ftHelpTip=true).
3. Navigate to the **Files** section, and download the compressed *ibm-watson-iot-edge-analytics-dslink-java-0.0.1* file.
4. Follow the instructions in the following recipes to install and configure the EAA software component on your gateway:
 - [Getting started with Edge Analytics in Watson IoT Platform](https://developer.ibm.com/recipes/?post_type=tutorials&p=18216)
-->
